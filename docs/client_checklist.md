# צ'ק ליסט הקלטת לקוח — AI Business Bot

> מסמך זה מפרט את כל השלבים הנדרשים להטמעת הבוט עבור לקוח חדש.
> **חשוב:** יש לעדכן מסמך זה בכל שינוי רלוונטי בקוד (ראו הנחיה ב-CLAUDE.md).

---

## שלב 1: איסוף מידע מהלקוח

לפני כל שינוי טכני — יש לאסוף מהלקוח את כל פריטי המידע הבאים.
הקטגוריות תואמות את המבנה ב-`seed_data.py`:

| # | פריט מידע | קטגוריה ב-seed_data | דוגמה מהדמו |
|---|-----------|---------------------|-------------|
| 1 | שם העסק | `BUSINESS_NAME` (config.py) | Dana's Beauty Salon |
| 2 | שירותים + מחירים | `Services` / `Pricing` | שירותי שיער, ציפורניים, פנים, שעווה + מחירון קיץ 2025 |
| 3 | שעות פתיחה (כולל ימים סגורים) | `Hours` | א'-ה' 9-19, ו' 9-14, שבת סגור |
| 4 | כתובת + דרכי הגעה | `Location` | שדרות רוטשילד 123, ת"א |
| 5 | פרטי יצירת קשר (טלפון, וואטסאפ, אימייל, רשתות) | `Location` | 03-555-0123, אינסטגרם וכו' |
| 6 | מדיניות ביטולים והזמנות | `Policies` | ביטול חינם עד 24 שעות לפני |
| 7 | מדיניות בטיחות והיגיינה | `Policies` | חיטוי אוטוקלאב, מוצרים cruelty-free |
| 8 | שאלות נפוצות (FAQ) | `FAQ` | 10 שאלות ותשובות נפוצות |
| 9 | צוות — שמות, התמחויות, ימי עבודה | `Staff` | דנה, מאיה, נור, יעל, ליאור |
| 10 | מבצעים והטבות פעילים | `Promotions` | הנחות קיץ, מועדון לקוחות, חבילות |
| 11 | סניפים נוספים (אם רלוונטי) | `Location` | — |
| 12 | לוגו / תמונת פרופיל לבוט | (BotFather) | — |
| 13 | סגנון תקשורת מועדף | פאנל אדמין → אישיות הבוט (`BOT_TONE`) | ידידותי / רשמי / מכירתי / יוקרתי |
| 14 | הוראות חופשיות לבוט (אם יש) | פאנל אדמין → אישיות הבוט (`BOT_CUSTOM_INSTRUCTIONS`) | "תמיד הזכר שאנחנו מציעים יום ניסיון חינם" |

---

## שלב 2: הקמת בוט טלגרם

- [ ] גישה ל-@BotFather בטלגרם
- [ ] יצירת בוט חדש עם `/newbot`
- [ ] בחירת שם תצוגה ו-username לבוט
- [ ] שמירת ה-Bot Token שהתקבל
- [ ] הגדרת תמונת פרופיל: `/setuserpic`
- [ ] הגדרת תיאור הבוט: `/setdescription`
- [ ] הגדרת About text: `/setabouttext`

---

## שלב 3: הגדרת סביבת עבודה

- [ ] שכפול הריפוזיטורי: `git clone <repo-url>`
- [ ] יצירת virtual environment: `python -m venv venv && source venv/bin/activate`
- [ ] התקנת תלויות: `pip install -r requirements.txt`
- [ ] העתקת קובץ הגדרות: `cp .env.example .env`
- [ ] מילוי המשתנים ב-`.env`:

| משתנה | תיאור | חובה? |
|-------|-------|-------|
| `TELEGRAM_BOT_TOKEN` | טוקן הבוט מ-BotFather | כן |
| `OPENAI_API_KEY` | מפתח API של OpenAI (embeddings + LLM) | כן |
| `TELEGRAM_OWNER_CHAT_ID` | Chat ID של בעל העסק (לקבלת התראות על תורים ובקשות נציג) | כן |
| `ADMIN_USERNAME` | שם משתמש לפאנל האדמין (ברירת מחדל: `admin`) | כן |
| `ADMIN_PASSWORD` | סיסמת כניסה לפאנל האדמין | כן |
| `ADMIN_SECRET_KEY` | מפתח סודי ל-Flask sessions (מחרוזת אקראית) | כן |
| `BUSINESS_NAME` | שם העסק (מופיע ב-system prompt) | כן |
| `BUSINESS_PHONE` | טלפון העסק (לכרטיס ביקור דיגיטלי) | לא |
| `BUSINESS_ADDRESS` | כתובת העסק (לכרטיס ביקור דיגיטלי) | לא |
| `BUSINESS_WEBSITE` | אתר העסק (לכרטיס ביקור דיגיטלי) | לא |
| `TELEGRAM_BOT_USERNAME` | שם המשתמש של הבוט ללא @ (ל-QR Code ולינקי הפניות) | לא |
| `OPENAI_MODEL` | מודל LLM (ברירת מחדל: `gpt-4.1-mini`) | לא |
| `ADMIN_PORT` | פורט פאנל האדמין (ברירת מחדל: `5000`) | לא |
| `BOT_TONE` | טון ברירת מחדל: `friendly` / `formal` / `sales` / `luxury`. ניתן לשינוי גם מפאנל האדמין | לא |
| `BOT_CUSTOM_INSTRUCTIONS` | הוראות חופשיות לבוט (טקסט חופשי). ניתן לשינוי גם מפאנל האדמין | לא |
| `FOLLOW_UP_ENABLED` | שאלות המשך חכמות — `true`/`false` (ברירת מחדל: `false`, פיצ'ר פרימיום) | לא |
| `RATE_LIMIT_PER_MINUTE` | מגבלת הודעות לדקה (ברירת מחדל: `10`). **אם `FOLLOW_UP_ENABLED=true` מומלץ להעלות ל-`15`** כי כל לחיצה על שאלת המשך נספרת כהודעה | לא |

---

## שלב 4: התאמת תוכן

### 4.1 עדכון `seed_data.py`

להחליף את ה-`DEMO_ENTRIES` בנתוני הלקוח. הקטגוריות הנתמכות:

| קטגוריה | כמות רשומות בדמו | מה לכלול |
|---------|-------------------|----------|
| `Services` | 4 (שיער, ציפורניים, פנים, שעווה) | כל שירות בנפרד עם פירוט מלא |
| `Pricing` | 1 | מחירון מלא, כולל הערות על מע"מ ואמצעי תשלום |
| `Hours` | 1 | שעות רגילות + הערות על חגים |
| `Location` | 1 | כתובת, דרכי הגעה, נגישות, פרטי קשר |
| `Staff` | 1 | שם, ניסיון, התמחות, ימי עבודה |
| `Policies` | 2 (ביטולים, בטיחות) | מדיניות ביטולים/הזמנות, היגיינה |
| `FAQ` | 1 | שאלות ותשובות נפוצות |
| `Promotions` | 1 | מבצעים פעילים, מועדון לקוחות, הנחות |

### 4.2 עדכון `config.py`

- [ ] שינוי `BUSINESS_NAME` (או הגדרתו ב-`.env`)
- [ ] בחירת טון תקשורת בפאנל האדמין (אישיות הבוט) — ידידותי / רשמי / מכירתי / יוקרתי
- [ ] הוספת הוראות חופשיות לבוט בפאנל האדמין (אם יש דרישות ספציפיות)

### 4.3 התאמת הודעות הבוט (`bot/handlers.py`)

- [ ] הודעת `/start` — ברכת פתיחה בהתאם לעסק
- [ ] טקסט כפתורים (מחירון, בקשת תור, מיקום, נציג)
- [ ] הודעות העברה לנציג אנושי

### 4.4 (אופציונלי) התאמת תבניות Admin

- [ ] לוגו / שם עסק ב-`admin/templates/base.html`
- [ ] התאמות עיצוב בהתאם למיתוג הלקוח

---

## שלב 5: בדיקות ואימות

### 5.1 הפעלה ראשונית
- [ ] הרצת seed: `python main.py --seed`
- [ ] הפעלת המערכת: `python main.py`

### 5.2 בדיקות בוט טלגרם
- [ ] הודעת פתיחה (`/start`) מופיעה עם כפתורים
- [ ] כפתור מחירון — מחזיר מחירים נכונים עם ציון מקור
- [ ] שאלה חופשית — תשובה מ-RAG עם ציון מקור (`מקור: ...`)
- [ ] שאלה שאין עליה מידע — הודעת fallback והפניה לנציג
- [ ] כפתור "דברו עם נציג" — יצירת בקשה + התראה לבעלים
- [ ] כפתור בקשת תור — זרימת שיחה מלאה (שירות → תאריך → שעה → אישור → ממתין לאישור בית העסק)
- [ ] כפתור מיקום — כתובת ודרכי הגעה
- [ ] כפתור "שמור איש קשר" — שליחת קובץ .vcf עם פרטי העסק
- [ ] שאלות המשך — אם `FOLLOW_UP_ENABLED=true`: אחרי תשובת RAG מופיעים 2-3 כפתורי שאלות המשך, לחיצה שולחת שאלה חדשה
- [ ] מערכת הפניות — כניסה עם deep link `?start=REF_XXX` מציגה הודעת הפניה
- [ ] מערכת הפניות — קוד הפניה נשלח אוטומטית פעם אחת בלבד (אחרי אישור תור או מעורבות גבוהה)
- [ ] מערכת הפניות — הקוד קבוע למשתמש וניתן לשיתוף חוזר עם מספר חברים
- [ ] מערכת הפניות — אישור תור ע"י בעל העסק מפעיל זיכויים לשני הצדדים

### 5.3 בדיקות פאנל אדמין
- [ ] כניסה עם פרטי ההתחברות
- [ ] דשבורד — נתונים סטטיסטיים תקינים (כולל הפניות שהושלמו)
- [ ] מאגר ידע — הוספה, עריכה, מחיקה, הפעלה/כיבוי רשומה
- [ ] תורים — צפייה ועדכון סטטוס (אישור תור מפעיל הפניה ממתינה)
- [ ] בקשות נציג — סימון כטופל/נדחה
- [ ] שיחות — צפייה בהיסטוריה
- [ ] שעות פעילות — עדכון שעות + ימים מיוחדים
- [ ] מצב חופשה — הפעלה/כיבוי, תאריך חזרה, הודעה מותאמת אישית
- [ ] אישיות הבוט — בחירת טון, הוספת הוראות חופשיות, תצוגה מקדימה
- [ ] בנייה מחדש של אינדקס RAG
- [ ] QR Code — תצוגה מקדימה, שינוי צבע, הורדת PNG
- [ ] הפניות — דף סטטיסטיקות הפניות, מפנים מובילים, רשימת הפניות

---

## שלב 6: העלאה לשרת (Deployment)

- [ ] בחירת ספק אירוח (Render, VPS, AWS, וכו')
- [ ] העלאת הקוד לשרת
- [ ] הגדרת משתני סביבה בשרת (כל המשתנים מ-`.env`)
- [ ] הגדרת `DATA_DIR` אם נדרש אחסון קבוע (persistent disk)
- [ ] הרצה עם process manager (pm2 / systemd / screen)
- [ ] אימות שהבוט מגיב בטלגרם מהשרת
- [ ] הגדרת auto-restart במקרה קריסה
- [ ] בדיקה שפאנל האדמין נגיש מהרשת (עם HTTPS)

---

## שלב 7: מסירה ללקוח

- [ ] שליחת לינק לבוט הטלגרם ללקוח
- [ ] מסירת פרטי גישה לפאנל האדמין (URL + username + password)
- [ ] הדרכה: עדכון מאגר ידע דרך הפאנל
- [ ] הדרכה: צפייה בשיחות ובקשות נציג
- [ ] הדרכה: ניהול תורים (אישור / ביטול)
- [ ] הדרכה: עדכון שעות פעילות וימים מיוחדים
- [ ] הדרכה: הפעלת מצב חופשה (תאריך חזרה + הודעה מותאמת)
- [ ] הדרכה: הורדת QR Code מהפאנל והדפסה/שיתוף
- [ ] סיכום תנאי תמיכה (SLA, ערוצי פנייה, עלויות)

---

## שלב 8: מעקב לאחר השקה

### יום ראשון (24 שעות)
- [ ] בדיקת דיוק תשובות הבוט על שאלות אמיתיות
- [ ] זיהוי שאלות שלא נענו (דרך "פערי ידע" בפאנל)
- [ ] הוספת רשומות ידע חסרות
- [ ] בנייה מחדש של אינדקס RAG לאחר הוספת תוכן

### שבוע ראשון
- [ ] הערכת שביעות רצון הלקוח
- [ ] סקירת שיחות — זיהוי דפוסים בעייתיים
- [ ] עדכון FAQ בהתאם לשאלות נפוצות בפועל
- [ ] בקשת המלצה / צילום מסך לשיווק (באישור הלקוח)
