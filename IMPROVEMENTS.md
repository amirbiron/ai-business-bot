# הצעות לשיפורים ושדרוגים — AI Business Chatbot

> **מטרה**: התאמת המוצר לצרכי עסקים קטנים בישראל, הגדלת ערך ללקוח, ומשיכת לקוחות חדשים.
>
> **תאריך**: פברואר 2026

---

## תוכן עניינים

1. [סקירת מצב קיים](#1-סקירת-מצב-קיים)
2. [אינטגרציות ערוצי תקשורת](#2-אינטגרציות-ערוצי-תקשורת)
3. [שדרוג מערכת ניהול התורים](#3-שדרוג-מערכת-ניהול-התורים)
4. [ניתוח נתונים ודוחות](#4-ניתוח-נתונים-ודוחות)
5. [ניהול לקוחות (CRM)](#5-ניהול-לקוחות-crm)
6. [שיפורי AI ומנוע השיחה](#6-שיפורי-ai-ומנוע-השיחה)
7. [אוטומציה שיווקית](#7-אוטומציה-שיווקית)
8. [שדרוג פאנל הניהול](#8-שדרוג-פאנל-הניהול)
9. [תשלומים וחיוב](#9-תשלומים-וחיוב)
10. [Onboarding וחוויית הקמה](#10-onboarding-וחוויית-הקמה)
11. [ביצועים ותשתית](#11-ביצועים-ותשתית)
12. [אבטחה ופרטיות](#12-אבטחה-ופרטיות)
13. [הצעת מודל תמחור (SaaS)](#13-הצעת-מודל-תמחור-saas)
14. [Roadmap מוצע](#14-roadmap-מוצע)

---

## 1. סקירת מצב קיים

### מה כבר קיים ועובד היטב

| יכולת | סטטוס | הערות |
|--------|--------|-------|
| בוט טלגרם עם תפריט כפתורים | עובד | ממשק נקי וידידותי |
| מנוע RAG (FAISS + OpenAI) | עובד | שכבת אחזור חכמה עם ציטוט מקורות |
| בדיקת איכות (Layer C) | עובד | מונע המצאת מידע |
| פאנל ניהול (Flask) | עובד | CRUD למאגר ידע, שיחות, תורים, בקשות |
| קביעת תורים בסיסית | עובד | תהליך שיחה מובנה |
| התראות לבעל העסק | עובד | הודעות טלגרם בזמן אמת |
| סיכום שיחות אוטומטי | עובד | זיכרון לטווח ארוך |
| Seed data לדוגמה | עובד | מאפשר הדגמה מהירה |

### פערים מרכזיים לשוק העסקים הקטנים

1. **ערוץ יחיד** — תמיכה בטלגרם בלבד; רוב העסקים בישראל עובדים עם וואטסאפ
2. **אין אינטגרציית יומן** — קביעת תורים ידנית ללא סנכרון עם Google Calendar או לוח שנה אחר
3. **אין CRM** — אין ניהול פרופיל לקוח, היסטוריית רכישות, או תיוג
4. **אין ניתוח נתונים** — בעל עסק לא יכול לראות מגמות, שעות עומס, שירותים פופולריים
5. **אין אוטומציות שיווקיות** — אין תזכורות, אין מעקב אחרי לקוחות שלא חזרו
6. **ללא אפשרות תשלום** — אין גבייה מקוונת למקדמות או שוברי מתנה
7. **Onboarding מורכב** — דורש ידע טכני (env, Python, OpenAI key)

---

## 2. אינטגרציות ערוצי תקשורת

### 2.1 אינטגרציית וואטסאפ (עדיפות: קריטית)

> **הנמקה**: וואטסאפ הוא ערוץ התקשורת הדומיננטי עבור עסקים קטנים בישראל. ללא תמיכה בוואטסאפ, הפתרון מפספס את רוב שוק היעד.

**מה נדרש**:
- אינטגרציה עם WhatsApp Business API דרך ספקי ענן (Twilio, 360dialog, Meta Cloud API)
- שכבת אבסטרקציה (`MessageChannel`) שמאפשרת הוספת ערוצים ללא שינוי הליבה
- תמיכה בכפתורים אינטראקטיביים (Interactive Buttons), רשימות (List Messages), וקטלוגים

**ארכיטקטורה מוצעת**:
```
bot/
├── channels/
│   ├── base.py            # MessageChannel abstract class
│   ├── telegram.py        # Telegram adapter (קיים, עטיפה)
│   ├── whatsapp.py        # WhatsApp Business API adapter
│   └── webchat.py         # Web widget adapter
├── handlers.py            # לוגיקה משותפת (כבר קיים, צריך הפרדה)
└── router.py              # ניתוב הודעות לפי ערוץ
```

**ערך ללקוח**: הלקוחות שלהם כבר בוואטסאפ — אין צורך להוריד אפליקציה חדשה.

### 2.2 צ'אט באתר אינטרנט (Web Widget)

> **הנמקה**: עסקים קטנים רבים מפעילים אתר WordPress, Wix או דף נחיתה. וידג'ט צ'אט באתר מאפשר ללקוחות לתקשר ישירות מהאתר.

**מה נדרש**:
- רכיב JavaScript קל משקל שניתן להטמיע בכל אתר (`<script>` tag)
- WebSocket endpoint ב-Flask (או שירות נפרד) לתקשורת דו-כיוונית
- עיצוב מותאם אישית (צבעים, לוגו) לכל עסק

**ערך ללקוח**: לקוחות שגולשים באתר יכולים לשאול שאלות מבלי לעזוב את הדף.

### 2.3 אינטגרציית Facebook Messenger (אופציונלי)

- שימוש ב-Facebook Messenger Platform
- חשוב במיוחד לעסקים עם נוכחות חזקה בפייסבוק
- מינוף אותו ה-adapter pattern כמו וואטסאפ וטלגרם

---

## 3. שדרוג מערכת ניהול התורים

### 3.1 יומן חכם עם Google Calendar Sync (עדיפות: גבוהה)

> **הנמקה**: המערכת הנוכחית שומרת בקשות תור ב-DB ומודיעה לבעל העסק — אבל אין בדיקת זמינות אמיתית. בעל עסק צריך ידנית לבדוק את היומן ולאשר.

**מה נדרש**:
- אינטגרציה עם Google Calendar API (OAuth2)
- בדיקת חלונות זמן פנויים בזמן אמת
- הצעת שעות פנויות ללקוח ישירות בצ'אט
- שליחת אישור/תזכורת אוטומטית ללקוח אחרי אישור התור
- אפשרות ביטול/שינוי תור ישירות מהבוט

**תהליך מוצע (UX)**:
```
לקוח: "אני רוצה לקבוע תור לתספורת"
בוט:   "מעולה! הנה הזמנים הפנויים לתספורת השבוע:
        📅 ראשון 23/2 — 10:00, 14:00, 16:00
        📅 שני 24/2 — 9:00, 11:00, 15:00
        📅 שלישי 25/2 — 10:00, 12:00, 18:00
        בחרו יום ושעה:"
לקוח: "ראשון ב-14:00"
בוט:   "✅ התור נקבע! תקבלו תזכורת יום לפני. לביטול כתבו 'בטל תור'."
```

### 3.2 תזכורות אוטומטיות (עדיפות: גבוהה)

**מה נדרש**:
- שליחת תזכורת 24 שעות לפני התור (הגדרה ניתנת לשינוי)
- שליחת תזכורת שעה לפני (אופציונלי)
- אפשרות ללקוח לאשר/לבטל ישירות מהתזכורת
- Scheduler (APScheduler או Celery Beat) לתזמון שליחת תזכורות

**ערך ללקוח**: הפחתת no-shows ב-30-50% (נתון שוק מוכח).

### 3.3 ניהול שירותים ומשכי טיפול

**מה נדרש**:
- טבלת `services` חדשה ב-DB עם שדות: שם, משך (דקות), מחיר, קטגוריה, פעיל/לא
- חיבור בין שירות למשכי זמן — מאפשר חישוב חלונות פנויים אמיתיים
- ממשק ניהול שירותים בפאנל האדמין

---

## 4. ניתוח נתונים ודוחות

### 4.1 דשבורד אנליטיקס (עדיפות: גבוהה)

> **הנמקה**: בעל עסק קטן רוצה לראות "מה עובד" — כמה לקוחות שאלו, מה הם שואלים, ומתי. המערכת הנוכחית מציגה רק מספרים גולמיים (כמות רשומות, כמות משתמשים).

**מדדים מוצעים**:

| מדד | תיאור | ויזואליזציה |
|------|--------|-------------|
| שיחות ביום/שבוע/חודש | מגמת שימוש | גרף קווי |
| שעות עומס | באיזה שעות הכי הרבה פניות | היטמאפ |
| שירותים פופולריים | מה הלקוחות הכי שואלים עליו | עוגה |
| שיעור handoff | % שיחות שהועברו לנציג | מד (gauge) |
| זמן תגובה ממוצע | כמה זמן לוקח לענות | מספר |
| שביעות רצון | דירוג (אם מיושם) | כוכבים |
| שאלות ללא מענה | שאלות שהבוט לא ידע לענות עליהן | רשימה |
| שיעור המרה לתור | % לקוחות שקבעו תור מתוך כל המשתמשים | מד |

**מימוש**:
- שימוש ב-Chart.js (כבר קל לשלב עם Flask templates)
- אגרגציית נתונים מטבלאות `conversations`, `appointments`, `agent_requests`
- API endpoints חדשים: `/api/analytics/daily`, `/api/analytics/services`, וכו'

### 4.2 דוחות תקופתיים אוטומטיים

- דוח שבועי/חודשי שנשלח לבעל העסק בטלגרם/מייל
- סיכום: כמה שיחות, כמה תורים, כמה בקשות נציג, שאלות חוזרות
- השוואה לתקופה קודמת (טרנד)

### 4.3 זיהוי "שאלות ללא מענה"

**מה נדרש**:
- לוג ייעודי לשאלות שגרמו ל-fallback (כבר יש logging ב-`_quality_check`)
- הצגת שאלות אלו בפאנל הניהול כ-"פערי ידע"
- כפתור "הוסף למאגר" שמאפשר לבעל העסק להוסיף תשובה ישירות

**ערך ללקוח**: בעל העסק מבין איזה מידע חסר ומשפר את הבוט בעצמו — לולאת שיפור מתמדת.

---

## 5. ניהול לקוחות (CRM)

### 5.1 פרופיל לקוח (עדיפות: גבוהה)

> **הנמקה**: המערכת הנוכחית שומרת `user_id` ו-`username` בטבלת `conversations`, אבל אין תצוגת "כרטיס לקוח" עם מידע מרוכז.

**טבלה חדשה מוצעת — `customers`**:
```sql
CREATE TABLE customers (
    id              INTEGER PRIMARY KEY AUTOINCREMENT,
    telegram_id     TEXT UNIQUE,
    whatsapp_id     TEXT UNIQUE,
    display_name    TEXT,
    phone           TEXT,
    email           TEXT,
    tags            TEXT DEFAULT '[]',  -- JSON array
    notes           TEXT DEFAULT '',
    total_visits    INTEGER DEFAULT 0,
    total_spent     REAL DEFAULT 0,
    last_visit      TEXT,
    created_at      TEXT DEFAULT (datetime('now')),
    updated_at      TEXT DEFAULT (datetime('now'))
);
```

**תצוגת כרטיס לקוח בפאנל**:
- שם, טלפון, ערוץ תקשורת
- היסטוריית תורים ושירותים
- היסטוריית שיחות (מקוצר)
- תגיות (VIP, לקוח חדש, לקוח חוזר, וכו')
- הערות חופשיות של בעל העסק

### 5.2 תיוג אוטומטי

- **לקוח חדש**: הביקור הראשון
- **לקוח חוזר**: יותר מ-2 ביקורים
- **לקוח VIP**: יותר מ-10 ביקורים או הוצאה מעל סכום מוגדר
- **לקוח רדום**: לא ביקר יותר מ-60 יום
- תגיות מותאמות אישית שבעל העסק מוסיף ידנית

### 5.3 ייצוא נתונים

- ייצוא רשימת לקוחות ל-CSV/Excel
- ייצוא היסטוריית תורים
- שימושי לרואי חשבון, קמפיינים שיווקיים חיצוניים, גיבוי

---

## 6. שיפורי AI ומנוע השיחה

### 6.1 תמיכה במודלים מרובים (עדיפות: בינונית)

> **הנמקה**: לא כל עסק קטן רוצה לשלם עבור GPT-4. מתן אפשרות בחירה בין מודלים מאפשר גמישות בעלות.

**מה נדרש**:
- תמיכה בממשק אחיד למודלים: OpenAI (GPT-4o-mini, GPT-4o), Anthropic Claude, מודלים מקומיים (Ollama)
- הגדרת מודל ברמת הסביבה (כבר קיים חלקית דרך `OPENAI_MODEL`)
- הרחבה: LLM Provider abstraction layer

**אפשרויות מודלים לשוק הישראלי**:
| מודל | עלות (בקירוב) | איכות עברית | המלצה |
|-------|---------------|------------|--------|
| GPT-4.1-mini | נמוכה | טובה מאוד | ברירת מחדל (קיים) |
| GPT-4.1 | בינונית | מצוינת | לעסקים שרוצים דיוק מקסימלי |
| Claude 3.5 Haiku | נמוכה | טובה | אלטרנטיבה חסכונית |
| Gemini 2.0 Flash | נמוכה מאוד | סבירה | חלופה בתקציב מינימלי |

### 6.2 שיפור מנוע RAG (עדיפות: בינונית)

**שיפורים מוצעים**:
- **Hybrid Search**: שילוב BM25 (חיפוש מילים) עם חיפוש וקטורי — משפר תוצאות בעברית
- **Re-ranking**: שימוש ב-cross-encoder לדירוג מחדש של תוצאות (מיקום ראשון מדויק יותר)
- **Query Expansion**: הרחבת שאילתא אוטומטית (מילים נרדפות, תרגום עברית-אנגלית לשמות שירותים)
- **Embedding Model**: שדרוג ל-`text-embedding-3-large` או מודל דו-לשוני טוב יותר

### 6.3 זיהוי כוונות (Intent Detection)

> **הנמקה**: כרגע כל הודעה עוברת דרך RAG. לפעמים הלקוח אומר "תודה" או "ביי" — אין צורך בחיפוש במאגר הידע.

**כוונות מוצעות**:
| כוונה | דוגמה | פעולה |
|--------|--------|--------|
| ברכה | "היי", "שלום" | תשובה ישירה ללא RAG |
| פרידה | "תודה", "ביי" | תשובה ישירה + שאלת משוב |
| קביעת תור | "רוצה תור", "אפשר להזמין" | הפעלת flow קביעת תור |
| ביטול תור | "רוצה לבטל", "אני מבטל" | הפעלת flow ביטול |
| שאלה על מחיר | "כמה עולה", "מה המחיר" | RAG ממוקד לקטגוריית Pricing |
| שאלה כללית | כל השאר | RAG מלא (כמו היום) |

**מימוש**: סיווג פשוט מבוסס keyword matching או מודל NLU קל (או אפילו LLM call קצר לסיווג).

### 6.4 שיחה פרואקטיבית

- אחרי 3 שאלות → "האם תרצו לקבוע תור?"
- אם הלקוח שאל על שירות ספציפי → "יש לנו מבצע על השירות הזה!"
- אחרי תור → "איך היה הטיפול? נשמח למשוב"

---

## 7. אוטומציה שיווקית

### 7.1 תזכורות חכמות (עדיפות: גבוהה)

> **הנמקה**: לקוח חוזר שווה פי 5-7 מלקוח חדש. תזכורות חכמות שומרות על קשר עם הלקוח ומעודדות חזרה.

**תזכורות מוצעות**:
- **תזכורת תור** — 24 שעות לפני (כבר הוזכר בסעיף 3.2)
- **מעקב אחרי טיפול** — הודעה 1-2 ימים אחרי ביקור: "איך הייתה החוויה? נשמח למשוב"
- **תזכורת חזרה** — "עברו 6 שבועות מהתספורת האחרונה! הגיע הזמן לחדש?"
- **ברכת יום הולדת** — "יום הולדת שמח! מצורף קופון 15% הנחה"
- **הודעה על מבצע** — שליחה מרוכזת ללקוחות על מבצעים חדשים

### 7.2 קופונים ומבצעים דיגיטליים

**מה נדרש**:
- טבלת `coupons` ב-DB
- יצירה וניהול דרך פאנל האדמין
- הבוט יכול לשלוח קופון ללקוח, ולבדוק אם הקוד תקף
- קופונים מותנים: "10% הנחה ללקוח חדש", "מבצע יום הולדת"

### 7.3 מערכת משוב ודירוגים

**תהליך מוצע**:
```
[אחרי ביקור]
בוט: "היי [שם]! תודה שביקרת אצלנו. איך הייתה החוויה?
      ⭐ 1  ⭐⭐ 2  ⭐⭐⭐ 3  ⭐⭐⭐⭐ 4  ⭐⭐⭐⭐⭐ 5"
לקוח: [בוחר דירוג]
בוט: "תודה רבה! יש משהו שהיינו יכולים לעשות טוב יותר?"
```

**ערך ללקוח**: מידע על שביעות רצון + אפשרות להגיב ללקוחות לא מרוצים לפני שהם כותבים ביקורת שלילית ברשת.

---

## 8. שדרוג פאנל הניהול

### 8.1 עיצוב מחדש — ממשק מודרני (עדיפות: גבוהה)

> **הנמקה**: בעלי עסקים קטנים לא טכניים. הממשק צריך להיות אינטואיטיבי, נקי, ומותאם לנייד.

**שיפורים מוצעים**:
- מעבר מ-Flask templates בסיסיים ל-UI מודרני (Tailwind CSS / Bootstrap 5 RTL)
- תמיכה מלאה ב-RTL (עברית)
- Responsive design — עובד טוב על מובייל (בעלי עסקים מנהלים מהטלפון!)
- Dark mode (אופציונלי)
- אנימציות ו-UX חלק (HTMX או Alpine.js לעדכונים דינמיים ללא reload)

### 8.2 ניהול מובייל (עדיפות: גבוהה)

**הנמקה**: בעל עסק קטן לא יושב מול מחשב. הוא צריך לנהל הכל מהטלפון.

**אפשרויות**:
- **אפשרות א' (מומלצת)**: ממשק Web רספונסיבי (PWA) — עובד כמו אפליקציה על הטלפון
- **אפשרות ב'**: בוט ניהול נפרד בטלגרם/וואטסאפ לבעל העסק (פקודות: `/תורים`, `/בקשות`, `/סטטיסטיקה`)

### 8.3 ניהול מאגר ידע חכם יותר

**שיפורים מוצעים**:
- **ייבוא מקובץ**: העלאת PDF, Word, או Excel עם מידע עסקי → המערכת מחלצת ומוסיפה לידע
- **עורך WYSIWYG**: עריכת תוכן עם עיצוב (bold, רשימות) במקום טקסט גולמי
- **תצוגה מקדימה**: "ראה איך הבוט יענה" — בדיקה מיידית בפאנל האדמין
- **גרסאות**: היסטוריית שינויים (undo אם עדכון שבר משהו)
- **בנייה מחדש אוטומטית**: כאשר בעל העסק מעדכן מידע, האינדקס נבנה מחדש אוטומטית ברקע (כבר מומש חלקית עם `mark_index_stale`)

### 8.4 ניהול שיחות בזמן אמת

**מה נדרש**:
- **Live Chat Takeover**: בעל העסק יכול "להיכנס" לשיחה ולענות ישירות ללקוח מהפאנל
- כאשר הבוט מעביר לנציג, הפאנל מראה התראה + אפשרות לכתוב תשובה
- כאשר בעל העסק מסיים — הבוט חוזר לנהל את השיחה

---

## 9. תשלומים וחיוב

### 9.1 גבייה מקוונת (עדיפות: בינונית-גבוהה)

> **הנמקה**: עסקים קטנים רוצים לגבות מקדמות, למכור שוברי מתנה, ולמנוע no-shows.

**אפשרויות אינטגרציה לשוק הישראלי**:
| ספק | התאמה | הערות |
|------|--------|-------|
| Meshulam | מצוינת | הכי נפוץ בעסקים קטנים בישראל |
| PayMe | מצוינת | ממשק פשוט, נפוץ |
| Stripe | טובה | בינלאומי, API מצוין |
| PayPal | סבירה | פחות נפוץ בישראל לעסקים קטנים |
| Bit Business | טובה | שימושי ללקוחות ישראלים |

**תרחישי שימוש**:
- גביית מקדמה (30%) בזמן קביעת תור
- מכירת שוברי מתנה דיגיטליים
- תשלום מלא מראש (עם הנחה)
- חיוב אוטומטי על no-show

### 9.2 שוברי מתנה דיגיטליים

- לקוח יכול לקנות שובר ישירות מהבוט
- שובר עם קוד ייחודי (QR)
- ניהול שוברים בפאנל האדמין (הנפקה, מימוש, תוקף)

---

## 10. Onboarding וחוויית הקמה

### 10.1 אשף הקמה מודרך (עדיפות: קריטית)

> **הנמקה**: התקנת המערכת דורשת כיום ידע ב-Python, env files, OpenAI API keys, Telegram BotFather — זה מסובך מדי לבעל עסק ממוצע. בלי חוויית הקמה פשוטה, לא ניתן למכור לעסקים קטנים.

**חוויית Onboarding מוצעת**:

```
שלב 1: "ברוכים הבאים! בואו נקים את הבוט שלכם."
        → הכנס שם העסק

שלב 2: "מה סוג העסק שלכם?"
        → בחירה מרשימה: מספרה, קוסמטיקה, רפואת שיניים, מסעדה, חנות, אחר
        → טעינת תבנית מידע ושאלות נפוצות בהתאם

שלב 3: "מלא את הפרטים הבסיסיים"
        → כתובת, שעות פתיחה, טלפון, שירותים ומחירים
        → טופס אינטואיטיבי (לא עריכת טקסט חופשי)

שלב 4: "בואו נחבר את הבוט לוואטסאפ/טלגרם"
        → מדריך צעד-אחר-צעד עם צילומי מסך

שלב 5: "הבוט שלכם מוכן! בדקו אותו עכשיו"
        → כפתור "נסה שיחה" ישירות מהפאנל
```

### 10.2 תבניות מוכנות לפי סוג עסק

| סוג עסק | תבנית כוללת |
|----------|-------------|
| מספרה / סלון יופי | שירותים, מחירון, שעות, צוות, מדיניות (כבר קיים כדוגמה) |
| מרפאת שיניים | טיפולים, מחירים, רופאים, ביטוחים, הנחיות |
| מסעדה / בית קפה | תפריט, שעות, הזמנות, אלרגנים, אירועים |
| חנות / קמעונאות | מוצרים, מלאי, משלוחים, החזרות, שעות |
| מכון כושר / סטודיו | שיעורים, מנויים, מדריכים, לוח שעות |
| עורך דין / רואה חשבון | תחומי שירות, תעריפים, קביעת פגישה |

### 10.3 פריסה בענן (Managed Hosting)

> **הנמקה**: עסק קטן לא רוצה לנהל שרת. הוא רוצה שירות שעובד.

**מודל מוצע**:
- שירות SaaS מנוהל — הלקוח רק ממלא פרטים ומקבל בוט עובד
- ניהול תשתית ב-Render / Railway / Fly.io (כבר יש `render.yaml`)
- הפרדת tenants (multi-tenancy): כל עסק = DB נפרד או schema נפרד
- תת-דומיין ייעודי לפאנל ניהול: `danabeauty.admin.yourproduct.co.il`

---

## 11. ביצועים ותשתית

### 11.1 מעבר ל-PostgreSQL (עדיפות: בינונית)

> **הנמקה**: SQLite מעולה לפיתוח ולעסק בודד, אבל לא מתאים ל-multi-tenant SaaS עם כתיבות מקבילות מרובות.

**יתרונות**:
- כתיבות מקבילות ללא נעילה
- גיבויים אוטומטיים (managed DB: Supabase, Neon, Render Postgres)
- Full-text search מובנה (משלים את FAISS)
- pgvector extension — אפשרות לאחסן embeddings ישירות ב-DB (ללא FAISS)

### 11.2 Caching

- **Redis/מטמון**: שמירת תשובות נפוצות → חיסכון בקריאות ל-OpenAI
- **Embedding cache**: אם אותה שאלה חוזרת — אין צורך לייצר embedding מחדש
- **Session cache**: זיכרון שיחה ב-Redis (מהיר יותר מ-DB לכל הודעה)

### 11.3 תור משימות (Task Queue)

- שימוש ב-Celery או ARQ לטיפול ברקע:
  - בניית אינדקס RAG (כבר כבד — לא לעשות בתוך request)
  - שליחת תזכורות
  - יצירת דוחות
  - סיכום שיחות (כבר מומש כ-fire-and-forget, אבל עדיף queue מנוהל)

### 11.4 Rate Limiting

- הגבלת קצב הודעות ללקוח (למניעת abuse)
- הגבלת קצב קריאות ל-OpenAI API (למניעת עלויות מפתיעות)
- הגדרה לכל tenant בנפרד

---

## 12. אבטחה ופרטיות

### 12.1 שיפורי אבטחה (עדיפות: גבוהה)

| נושא | מצב נוכחי | שיפור מוצע |
|-------|-----------|------------|
| אימות סיסמא | תומך ב-hash (Werkzeug) | הוספת 2FA (TOTP) |
| Session | Flask session עם secret key | הגדרת תפוגה + httponly + secure flags |
| CSRF | מוגן (Flask-WTF) | מצוין, לשמר |
| API Authentication | אין (endpoints פנימיים) | הוספת API key / JWT לכל endpoint |
| הצפנת DB | אין | הצפנת שדות רגישים (מספרי טלפון, הודעות) |
| Audit Log | אין | לוג פעולות ניהול (מי שינה מה ומתי) |

### 12.2 תאימות GDPR / חוק הגנת הפרטיות

- **מדיניות פרטיות**: הבוט מודיע ללקוח בהתחברות ראשונה על שמירת מידע
- **מחיקת מידע**: לקוח יכול לבקש מחיקת כל המידע שלו (Right to be forgotten)
- **ייצוא מידע**: לקוח יכול לבקש עותק של המידע שנשמר עליו
- **הסכמה**: הודעת opt-in ברורה לפני שמירת נתונים

### 12.3 Multi-User Admin

- תמיכה בכמה משתמשי ניהול עם הרשאות שונות:
  - **בעלים**: גישה מלאה
  - **מנהל**: ניהול ידע, תורים, לקוחות
  - **צפייה בלבד**: רק צפייה בדוחות ושיחות

---

## 13. הצעת מודל תמחור (SaaS)

### מבנה חבילות מוצע

| חבילה | מחיר חודשי (מוצע) | כלול |
|--------|-------------------|------|
| **חינם (Free)** | 0 ₪ | 100 הודעות/חודש, ערוץ אחד (טלגרם), מאגר ידע בסיסי |
| **בייסיק** | 99 ₪ | 1,000 הודעות/חודש, וואטסאפ + טלגרם, קביעת תורים, תזכורות |
| **ביזנס** | 249 ₪ | 5,000 הודעות/חודש, כל הערוצים, CRM, אנליטיקס, אוטומציות |
| **פרימיום** | 449 ₪ | ללא הגבלה, כל הפיצ'רים, Live Chat, תשלומים, תמיכה אישית |

### הנמקה

- **Free tier** חיוני למשיכת לקוחות — נותן להם לנסות לפני רכישה
- **עלות OpenAI** בקירוב: GPT-4.1-mini = ~$0.0004 לכל הודעה → 1,000 הודעות ≈ 1.5 ₪ (עלות שולית)
- **מרווח רווח** משמעותי בכל החבילות
- **Upsell טבעי**: עסק מתחיל ב-Free, גדל, רוצה וואטסאפ/אנליטיקס → משדרג

---

## 14. Roadmap מוצע

### Phase 1 — MVP+ (חודשים 1-2)
> מטרה: הפוך את המוצר ל"מוכר" לעסקים קטנים

- [ ] אשף Onboarding מודרך בפאנל האדמין
- [ ] 3 תבניות עסק מוכנות (סלון יופי, מרפאה, מסעדה)
- [ ] עיצוב מחדש של פאנל הניהול (RTL, מובייל)
- [ ] דשבורד אנליטיקס בסיסי (שיחות ביום, שעות עומס, שיעור handoff)
- [ ] זיהוי "שאלות ללא מענה" + כפתור "הוסף למאגר"
- [ ] תזכורות תור (24 שעות לפני)

### Phase 2 — ערוצים ו-CRM (חודשים 3-4)
> מטרה: הרחבת ערוצים ובניית קשר עם לקוחות

- [ ] אינטגרציית וואטסאפ
- [ ] שכבת אבסטרקציה לערוצים (`MessageChannel`)
- [ ] פרופיל לקוח (CRM בסיסי)
- [ ] תיוג אוטומטי (חדש, חוזר, VIP, רדום)
- [ ] מערכת משוב (דירוג אחרי ביקור)
- [ ] Web Chat Widget

### Phase 3 — אוטומציה ותשלומים (חודשים 5-6)
> מטרה: אוטומציות שמייצרות ערך עסקי ישיר

- [ ] סנכרון Google Calendar
- [ ] תזכורות חכמות (חזרה, יום הולדת, מבצע)
- [ ] קופונים דיגיטליים
- [ ] אינטגרציית תשלומים (Meshulam / PayMe)
- [ ] שוברי מתנה דיגיטליים
- [ ] Live Chat Takeover מפאנל הניהול

### Phase 4 — Scale (חודשים 7-8)
> מטרה: תשתית ל-SaaS מנוהל

- [ ] Multi-tenancy
- [ ] מעבר ל-PostgreSQL + pgvector
- [ ] Caching (Redis)
- [ ] Task Queue (Celery)
- [ ] Rate Limiting
- [ ] 2FA לאדמין
- [ ] Audit Log
- [ ] דוחות תקופתיים אוטומטיים

---

## סיכום

הפרויקט הנוכחי הוא בסיס טכני איתן עם ארכיטקטורה נקייה ומנוע RAG עובד. הפערים העיקריים לשוק העסקים הקטנים הם:

1. **וואטסאפ** — בלעדיו, קשה מאוד למכור בישראל
2. **Onboarding פשוט** — עסק קטן לא יעבור תהליך טכני
3. **אנליטיקס** — בעלי עסקים רוצים לראות שהבוט מייצר ערך
4. **תורים חכמים** — עם סנכרון יומן ותזכורות
5. **CRM בסיסי** — לדעת מי הלקוחות ולשמר אותם

ההשקעה בארבעת הפיצ'רים הראשונים (וואטסאפ, Onboarding, אנליטיקס, תורים חכמים) תייצר את הערך הגדול ביותר בזמן הקצר ביותר.
