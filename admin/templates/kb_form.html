{% extends "base.html" %}

{% block content %}
<div class="mb-4">
    <a href="/kb" class="btn btn-outline-secondary btn-sm">
        <i class="bi bi-arrow-left"></i> Back to Knowledge Base
    </a>
</div>

<h2><i class="bi bi-pencil-square"></i> {{ action }} Knowledge Base Entry</h2>

<div class="card mt-4">
    <div class="card-body">
        <form method="POST">
            <div class="mb-3">
                <label for="category" class="form-label"><strong>Category</strong></label>
                <input type="text" class="form-control" id="category" name="category" 
                       value="{{ entry.category if entry else '' }}"
                       list="category-list" required
                       placeholder="e.g., Services, Pricing, FAQ, Policies, Hours, Staff, Location">
                <datalist id="category-list">
                    {% for cat in categories %}
                    <option value="{{ cat }}">
                    {% endfor %}
                    <option value="Services">
                    <option value="Pricing">
                    <option value="FAQ">
                    <option value="Policies">
                    <option value="Hours">
                    <option value="Staff">
                    <option value="Location">
                    <option value="General">
                </datalist>
                <div class="form-text">Type a new category or select an existing one.</div>
            </div>

            <div class="mb-3">
                <label for="title" class="form-label"><strong>Title</strong></label>
                <input type="text" class="form-control" id="title" name="title" 
                       value="{{ entry.title if entry else '' }}" required
                       placeholder="e.g., Summer 2025 Price List">
            </div>

            <div class="mb-3">
                <label for="content" class="form-label"><strong>Content</strong></label>
                <textarea class="form-control" id="content" name="content" rows="12" required
                          placeholder="Enter the full content here. Include all details â€” the system will automatically chunk it for the AI.">{{ entry.content if entry else '' }}</textarea>
                <div class="form-text">
                    Write naturally. The system will split long content into smaller chunks for better AI retrieval.
                </div>
            </div>

            <div class="d-flex justify-content-between">
                <a href="/kb" class="btn btn-outline-secondary">Cancel</a>
                <button type="submit" class="btn btn-primary" style="background-color: #6c5ce7; border: none;">
                    <i class="bi bi-check-lg"></i> {{ action }} Entry
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
